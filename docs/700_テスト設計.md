# テスト設計

## 1. テストレベル
- **単体テスト**: ビジネスロジック（労働時間計算、給与算出ロジック）を網羅する。
- **結合テスト**: APIエンドポイント、DB制約、非同期ジョブの連携を確認する。
- **総合テスト**: 主要な業務シナリオ（打刻〜承認〜締め〜給与確定）を通しで確認する。

## 2. 重点テスト項目
- **マルチテナント境界**: 別テナントの `company_id` を指定した際にデータが取得・変更できないことの徹底検証。
- **給与計算の正確性**: 端数処理、社会保険料計算、残業代係数の適用が法律・規程通りであること。
- **締め・ロック**: 確定後のデータが不正に書き換えられないこと。
- **差分計算**: 過去の勤怠を修正した際の影響範囲と、再計算結果の整合性。

## 3. テストデータ方針
- 本番データの利用は原則禁止。個人情報を伏字にした匿名化データ、またはツールで生成した疑似データを使用する。
- 境界値テスト（月末、閏年、退職日当日など）のパターンをテストスイートに含める。

## 4. 負荷テスト
- 給与計算ジョブ実行中に、他のユーザーの打刻処理が遅延しないことを確認する。

