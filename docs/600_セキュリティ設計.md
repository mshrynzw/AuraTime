# セキュリティ設計

## 1. 認証と認可
- **認証**: 多要素認証 (MFA) の導入を推奨（特に管理者権限）。
- **認可 (RBAC)**: ロール（System Admin/Admin/Manager/Employee）に基づく厳密なアクセス制御。
- **マルチテナント隔離**: SQL実行層での `company_id` 指定漏れを防止するライブラリやフレームワーク（RLS等）の利用。

## 2. データ保護
- **通信暗号化**: 全経路において TLS 1.2 以上を必須とする。
- **保存データ暗号化**: RDS のディスク暗号化 (AES-256) を有効化。
- **パスワード**: 強力なハッシュアルゴリズム（Argon2, bcrypt等）を使用し、平文での保存は厳禁。
- **個人情報 (PII)**: 住所や銀行口座番号等の重要項目については、アプリケーション層での暗号化も検討する。

## 3. 防御策
- **SQLインジェクション**: プリペアドステートメントの使用を徹底。
- **XSS / CSRF**: フレームワーク標準の保護機能を有効化。
- **レート制限**: ブルートフォース攻撃防止のため、ログイン試行やAPIリクエストへのレートリミットを適用。

## 4. 監査・監視
- 特権ユーザーによるデータ変更はすべて `audit_logs` に記録し、定期的にレビューする。
- 異常なログイン試行や大量のデータダウンロードを検知・通知する。

