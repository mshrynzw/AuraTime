# 運用設計

## 1. 監視・アラート
- **死活監視**: HTTPエンドポイントおよびDBの生存確認。
- **パフォーマンス監視**: レスポンスタイム、CPU/メモリ使用率、DBコネクション数。
- **業務監視**: 失敗した `job_runs` の検知、監査ログでの不審な操作の検知。

## 2. 障害対応フロー
1.  **検知**: アラート（Slack, PagerDuty等）またはユーザーからの申告。
2.  **初期調査**: `request_id` を元に CloudWatch Logs および `job_runs` / `audit_logs` を確認。
3.  **応急処置**: サーバー再起動、スケーリング、またはデータの不備修正。
4.  **恒久対策**: バグ修正、インフラ設定変更。

## 3. 保守作業
- **DBメンテナンス**: 定期的な VACUUM、インデックスの再構築。
- **パッチ適用**: OS、言語ランタイム、ライブラリのセキュリティアップデート。
- **データクレンジング**: 古いログデータ（保存期間を過ぎたもの）のS3へのアーカイブまたは削除。

## 4. ユーザーサポート連携
- ユーザーからの問い合わせに対し、管理画面からジョブの実行状況や監査ログを参照して回答する手順の整備。

